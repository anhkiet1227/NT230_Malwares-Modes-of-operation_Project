import os
import csv

MALWARE_FOLDER = "../data/malware_samples"
FEATURES_FOLDER = "../data/extracted_features"

def extract_features(file_path):
    # Implement feature extraction code here
    # This could include extracting file size, entropy, opcode frequency, etc.
    # For example, here we just extract the file name as a feature:
    file_name = os.path.basename(file_path)
    return [file_name]

def main():
    if not os.path.exists(FEATURES_FOLDER):
        os.makedirs(FEATURES_FOLDER)

    # Loop through all malware samples
    for file_name in os.listdir(MALWARE_FOLDER):
        file_path = os.path.join(MALWARE_FOLDER, file_name)

        # Extract features
        features = extract_features(file_path)

        # Save features as CSV file
        csv_file_path = os.path.join(FEATURES_FOLDER, file_name + ".csv")
        with open(csv_file_path, "w", newline="") as csv_file:
            writer = csv.writer(csv_file)
            writer.writerow(features)

if __name__ == "__main__":
    main()
